import{r as n,R as w,u as y,a as N,j as e}from"./index-BtqNk3Ie.js";import{p as k}from"./api-BPstxoyE.js";import{F as C}from"./Camera Logo-CYCuahmZ.js";const A="/assets/MoviesImageBG-BdPXnqUi.png",I=({initialMode:o="login"})=>{const[b,m]=n.useState(o),[s,p]=w.useState({username:"",email:"",password:""}),[u,r]=n.useState(""),[x,g]=n.useState(!1),h=y(),{setToken:f}=N();n.useEffect(()=>{m(o)},[o]);const t=b==="login",l=i=>{const{name:c,value:d}=i.target;p(a=>({...a,[c]:d}))},j=async i=>{i.preventDefault(),r(""),g(!0);const c=t?"/auth/login":"/auth/register",d=t?{email:s.email,password:s.password}:s;try{const a=await k(c,d);f(a.token),h("/dashboard")}catch(a){a instanceof Error?r(a.message):r("An unexpected error occurred. Please try again.")}finally{g(!1)}},v=()=>{r(""),m(t?"register":"login")};return e.jsxs("div",{className:"relative flex h-screen w-full font-sans",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${A})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm"})}),e.jsx("div",{className:"relative z-10 flex w-full justify-center items-center px-4",children:e.jsxs("div",{className:"bg-white bg-opacity-95 rounded-xl shadow-2xl p-8 sm:p-10 w-full max-w-[460px]",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-indigo-800",children:"FilmVault"}),e.jsx("img",{src:C,alt:"FilmVault logo",className:"w-10 h-10"})]}),e.jsx("h2",{className:"text-2xl font-semibold text-center mb-6 italic text-gray-700",children:t?"Log In to Your Account":"Create Your Account"}),e.jsxs("form",{className:"space-y-6",onSubmit:j,children:[!t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800",children:"Name"}),e.jsx("input",{type:"text",name:"username",value:s.username,onChange:l,className:"mt-1 w-full border-b-2 bg-transparent border-gray-400 focus:outline-none focus:border-indigo-500 p-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:l,className:"mt-1 w-full border-b-2 bg-transparent border-gray-400 focus:outline-none focus:border-indigo-500 p-1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-800",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:l,className:"mt-1 w-full border-b-2 bg-transparent border-gray-400 focus:outline-none focus:border-indigo-500 p-1",required:!0})]}),u&&e.jsx("p",{className:"text-sm text-red-600 font-medium text-center mt-1 mb-3",children:u}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-xl transition-all duration-300 cursor-pointer flex items-center justify-center disabled:bg-indigo-400 disabled:cursor-not-allowed",disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):t?"Log In":"Create Account"})]}),e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:[t?"Don't have an account?":"Already have an account?"," ",e.jsx("button",{onClick:v,className:"text-indigo-600 font-medium hover:underline focus:outline-none bg-transparent border-none cursor-pointer",children:t?"Create an account":"Sign in"})]})]})})]})};export{I as default};
