import{j as e,r as a}from"./index-Dd0bwh6b.js";const M=({onClick:t})=>e.jsx("div",{onClick:t,className:"w-full aspect-[2/3] rounded-lg shadow-md border-2 border-violet-400 border-dashed bg-violet-100 flex items-center justify-center cursor-pointer hover:shadow-lg transition duration-300 hover:bg-violet-200 active:scale-95",children:e.jsx("div",{className:"bg-violet-600 rounded-xl p-5 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-4xl font-bold",children:"+"})})}),b="https://image.tmdb.org/t/p/w500",j=t=>t?`${b}${t}`:"../assets/Camera Logo.svg",w=t=>({id:t.id,title:t.title,overview:t.overview,posterPath:t.poster_path,voteAverage:t.vote_average,releaseDate:t.release_date,fullPosterPath:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:""}),P=({onClose:t,onAddToDashboard:r,onAddToWatchlist:s,isWatchlist:m=!1})=>{const[i,n]=a.useState(""),[v,d]=a.useState([]),[p,x]=a.useState(!1),[u,h]=a.useState(""),c=a.useRef(null);a.useEffect(()=>{if(!i.trim()){d([]);return}return c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{(async()=>{x(!0),h("");try{const o=await fetch(`https://localhost:7170/api/movies/search?query=${encodeURIComponent(i)}`);if(!o.ok){h("Failed to fetch results"),d([]);return}const f=await o.json();d(f||[])}catch(o){console.error("Error fetching movie suggestions:",o),h("An error occurred while searching"),d([])}finally{x(!1)}})()},300),()=>{c.current&&clearTimeout(c.current)}},[i]);const g=l=>{m?s(l):r(l),t()};return e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-slate-700/25 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[500px] relative",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Search for a Movie"}),e.jsx("input",{type:"text",placeholder:"Search...",value:i,onChange:l=>n(l.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3"}),p&&e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Searching..."}),u&&e.jsx("p",{className:"text-sm text-red-500 mb-3",children:u}),e.jsx("div",{className:"flex justify-between gap-2 mb-4",children:v.slice(0,3).map(l=>{const o=w(l);return e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("img",{src:j(o.posterPath),alt:o.title,className:"w-[100px] h-[150px] object-cover rounded shadow cursor-pointer hover:scale-105 transition",onClick:()=>g(o.id)})},o.id)})}),e.jsx("button",{onClick:t,className:"mt-2 text-sm text-gray-500 hover:underline",children:"Close"})]})})},N="https://localhost:7170/api/movies",y=async t=>{try{const r=await fetch(`${N}/${t}`);if(!r.ok)throw new Error(`Failed to fetch movie data: ${r.statusText}`);const s=await r.json();return console.log("API Response:",s),{id:s.id,title:s.title,overview:s.overview,posterPath:s.poster_path??null,voteAverage:s.vote_average??0,releaseDate:s.release_date??null,fullPosterPath:s.poster_path?`https://image.tmdb.org/t/p/w500${s.poster_path}`:""}}catch(r){return console.error("Error fetching movie:",r),null}},R=({movieId:t,asCard:r})=>{const[s,m]=a.useState(null);return a.useEffect(()=>{(async()=>{const n=await y(t);console.log("Fetched movie data:",n),n&&m(n)})()},[t]),s?r?e.jsx("img",{src:s.fullPosterPath,alt:s.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md"}):e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("img",{src:s.fullPosterPath,alt:s.title,className:"w-[200px] md:w-[250px] rounded-lg shadow"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:s.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:s.overview}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Rating:"})," ",s.voteAverage.toFixed(1)]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Release Date:"})," ",s.releaseDate||"N/A"]})]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"Loading movie details..."})},S=({movieTitle:t,onConfirm:r,onCancel:s})=>e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-slate-700/25 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[500px] relative border border-red-700",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-500",children:"Confirm Removal"}),e.jsxs("p",{className:"text-gray-800 mb-6 text-sm",children:["Are you sure you want to remove ",e.jsx("strong",{children:t})," from your dashboard?"]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:s,className:"text-sm text-gray-600 hover:underline cursor-pointer transition duration-200",children:"Cancel"}),e.jsx("button",{onClick:r,className:"bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded text-sm cursor-pointer transition duration-200",children:"Remove"})]})]})});export{M as A,S as C,R as M,P as a};
