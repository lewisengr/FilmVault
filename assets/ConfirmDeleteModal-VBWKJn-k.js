import{j as e,r as a}from"./index-C1zTPXrf.js";import{A as b,g as j}from"./api-Cyf7xHkP.js";const A=({onClick:s})=>e.jsx("div",{onClick:s,className:"w-full aspect-[2/3] rounded-lg shadow-md border-2 border-violet-400 border-dashed bg-violet-100 flex items-center justify-center cursor-pointer hover:shadow-lg transition duration-300 hover:bg-violet-200 active:scale-95",children:e.jsx("div",{className:"bg-violet-600 rounded-xl p-5 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-4xl font-bold",children:"+"})})}),w="https://image.tmdb.org/t/p/w500",N=s=>s?`${w}${s}`:"../assets/Camera Logo.svg",y=s=>({id:s.id,title:s.title,overview:s.overview,posterPath:s.poster_path,voteAverage:s.vote_average,releaseDate:s.release_date,fullPosterPath:s.poster_path?`https://image.tmdb.org/t/p/w500${s.poster_path}`:null}),C=({onClose:s,onAddToDashboard:o,onAddToWatchlist:t,isWatchlist:m=!1})=>{const[i,n]=a.useState(""),[v,d]=a.useState([]),[g,x]=a.useState(!1),[h,u]=a.useState(""),c=a.useRef(null);a.useEffect(()=>{if(!i.trim()){d([]);return}return c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{(async()=>{x(!0),u("");try{const r=await fetch(`${b}/movies/search?query=${encodeURIComponent(i.trim())}&include_adult=true&language=en-US`);if(!r.ok){u("Failed to fetch results"),d([]);return}const p=await r.json();d(p||[])}catch(r){console.error("Error fetching movie suggestions:",r),u("An error occurred while searching"),d([])}finally{x(!1)}})()},300),()=>{c.current&&clearTimeout(c.current)}},[i]);const f=l=>{m?t(l):o(l),s()};return e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-slate-700/25 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[500px] relative",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Search for a Movie"}),e.jsx("input",{type:"text",placeholder:"Search...",value:i,onChange:l=>n(l.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 mb-3"}),g&&e.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Searching..."}),h&&e.jsx("p",{className:"text-sm text-red-500 mb-3",children:h}),e.jsx("div",{className:"flex justify-between gap-2 mb-4",children:v.slice(0,3).map(l=>{const r=y(l);return e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("img",{src:N(r.posterPath),alt:r.title,className:"w-[100px] h-[150px] object-cover rounded shadow cursor-pointer hover:scale-105 transition",onClick:()=>f(r.id)})},r.id)})}),e.jsx("button",{onClick:s,className:"mt-2 text-sm text-gray-500 hover:underline",children:"Close"})]})})},P=async(s,o)=>{try{const t=await j(`/movies/${s}`,o);return{id:t.id,title:t.title,overview:t.overview,posterPath:t.posterPath??null,voteAverage:t.voteAverage??0,releaseDate:t.releaseDate??null,fullPosterPath:t.posterPath?`https://image.tmdb.org/t/p/w500${t.posterPath}`:null}}catch(t){return console.error("Error fetching movie:",t),null}},R=({movieId:s,asCard:o})=>{const[t,m]=a.useState(null);return a.useEffect(()=>{(async()=>{const n=await P(s);console.log("Fetched movie data:",n),n&&m(n)})()},[s]),t?o?t.fullPosterPath?e.jsx("img",{src:t.fullPosterPath,alt:t.title,className:"w-full aspect-[2/3] object-cover rounded-lg shadow-md"}):null:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("img",{src:t.fullPosterPath??"",alt:t.title,className:"w-[200px] md:w-[250px] rounded-lg shadow"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-slate-600 mb-4",children:t.overview}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Rating:"})," ",t.voteAverage.toFixed(1)]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Release Date:"})," ",t.releaseDate||"N/A"]})]})]}):e.jsx("p",{className:"text-sm text-gray-500",children:"Loading movie details..."})},_=({movieTitle:s,onConfirm:o,onCancel:t})=>e.jsx("div",{className:"fixed inset-0 backdrop-blur-sm bg-slate-700/25 flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg w-[500px] relative border border-red-700",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-red-500",children:"Confirm Removal"}),e.jsxs("p",{className:"text-gray-800 mb-6 text-sm",children:["Are you sure you want to remove ",e.jsx("strong",{children:s})," from your dashboard?"]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:t,className:"text-sm text-gray-600 hover:underline cursor-pointer transition duration-200",children:"Cancel"}),e.jsx("button",{onClick:o,className:"bg-red-500 hover:bg-red-700 text-white px-4 py-2 rounded text-sm cursor-pointer transition duration-200",children:"Remove"})]})]})});export{A,_ as C,R as M,C as a};
